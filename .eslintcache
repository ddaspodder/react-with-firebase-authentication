[{"C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\index.js":"1","C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\App.js":"2","C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\pages\\AuthPage.js":"3","C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\pages\\HomePage.js":"4","C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\components\\Layout\\Layout.js":"5","C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\components\\Profile\\UserProfile.js":"6","C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\components\\Layout\\MainNavigation.js":"7","C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\components\\Auth\\AuthForm.js":"8","C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\components\\Profile\\ProfileForm.js":"9","C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\components\\StartingPage\\StartingPageContent.js":"10","C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\components\\StartingPage\\AddMovie.js":"11","C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\components\\StartingPage\\MoviesList.js":"12","C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\components\\StartingPage\\Movie.js":"13","C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\store\\SessionStore.js":"14","C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\pages\\ErrorPage.js":"15","C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\components\\Error\\index.js":"16"},{"size":353,"mtime":1660920278101,"results":"17","hashOfConfig":"18"},{"size":975,"mtime":1660988386154,"results":"19","hashOfConfig":"18"},{"size":130,"mtime":1648630796000,"results":"20","hashOfConfig":"18"},{"size":171,"mtime":1648630796000,"results":"21","hashOfConfig":"18"},{"size":246,"mtime":1648630796000,"results":"22","hashOfConfig":"18"},{"size":278,"mtime":1660929426825,"results":"23","hashOfConfig":"18"},{"size":1059,"mtime":1660919755077,"results":"24","hashOfConfig":"18"},{"size":3102,"mtime":1660926857507,"results":"25","hashOfConfig":"18"},{"size":1884,"mtime":1660987619688,"results":"26","hashOfConfig":"18"},{"size":2399,"mtime":1660927582946,"results":"27","hashOfConfig":"18"},{"size":1150,"mtime":1616579520000,"results":"28","hashOfConfig":"18"},{"size":444,"mtime":1616579520000,"results":"29","hashOfConfig":"18"},{"size":282,"mtime":1616579520000,"results":"30","hashOfConfig":"18"},{"size":1560,"mtime":1660927674452,"results":"31","hashOfConfig":"18"},{"size":125,"mtime":1660988319530,"results":"32","hashOfConfig":"18"},{"size":375,"mtime":1660989964197,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"t5ope6",{"filePath":"37","messages":"38","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"39","messages":"40","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"41","messages":"42","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"43","messages":"44","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"45","messages":"46","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"47","messages":"48","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"49","messages":"50","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"51","messages":"52","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"55","usedDeprecatedRules":"36"},{"filePath":"56","messages":"57","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"58","messages":"59","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"60","messages":"61","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"62","messages":"63","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"64","usedDeprecatedRules":"36"},{"filePath":"65","messages":"66","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\index.js",[],["69","70"],"C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\App.js",[],"C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\pages\\AuthPage.js",[],"C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\pages\\HomePage.js",[],"C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\components\\Layout\\Layout.js",[],"C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\components\\Profile\\UserProfile.js",[],"C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\components\\Layout\\MainNavigation.js",[],"C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\components\\Auth\\AuthForm.js",[],"C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\components\\Profile\\ProfileForm.js",[],"C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\components\\StartingPage\\StartingPageContent.js",["71"],"import React, { useState, useEffect, useCallback, useContext } from \"react\";\nimport { SessionContext } from \"../../store/SessionStore\";\nimport MoviesList from \"./MoviesList\";\nimport AddMovie from \"./AddMovie\";\nimport classes from \"./StartingPageContent.module.css\";\n\nconst StartingPageContent = () => {\n  const [movies, setMovies] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const {\n    session: { idToken },\n  } = useContext(SessionContext);\n\n  const fetchMoviesHandler = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const response = await fetch(\n        `https://restapi-51ed5-default-rtdb.firebaseio.com/movies.json?auth=${idToken}`\n      );\n      if (!response.ok) {\n        throw new Error(\"Something went wrong!\");\n      }\n\n      const data = await response.json();\n\n      console.log(\"response fetch\", response);\n\n      const transformedMovies = (() => {\n        const movies = [];\n        for (let [key, value] of Object.entries(data)) {\n          movies.push({ ...value, id: key });\n        }\n        return movies;\n      })();\n\n      setMovies(transformedMovies);\n    } catch (error) {\n      setError(error.message);\n    }\n    setIsLoading(false);\n  }, []);\n\n  useEffect(() => {\n    fetchMoviesHandler();\n  }, [fetchMoviesHandler]);\n\n  async function addMovieHandler(movie) {\n    console.log(movie);\n    try {\n      const res = await fetch(\n        `https://restapi-51ed5-default-rtdb.firebaseio.com/movies.json?auth=${idToken}`,\n        {\n          method: \"POST\",\n          body: JSON.stringify(movie),\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        }\n      );\n      const data = await res.json();\n      console.log(\"response\", data);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  let content = <p>Found no movies.</p>;\n\n  if (movies.length > 0) {\n    content = <MoviesList movies={movies} />;\n  }\n\n  if (error) {\n    content = <p>{error}</p>;\n  }\n\n  if (isLoading) {\n    content = <p>Loading...</p>;\n  }\n\n  return (\n    <>\n      <section className={classes.starting}>\n        <AddMovie onAddMovie={addMovieHandler} />\n      </section>\n      <section>\n        <button onClick={fetchMoviesHandler}>Fetch Movies</button>\n      </section>\n      <section>{content}</section>\n    </>\n  );\n};\n\nexport default StartingPageContent;\n","C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\components\\StartingPage\\AddMovie.js",[],"C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\components\\StartingPage\\MoviesList.js",[],"C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\components\\StartingPage\\Movie.js",[],"C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\store\\SessionStore.js",["72"],"import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport const defaultSession = {\r\n  user: {\r\n    email: \"\",\r\n    expiresIn: \"\",\r\n    expiresAt: \"\",\r\n    idToken: \"\",\r\n    isLoggedIn: false,\r\n  },\r\n  setUser: () => {},\r\n  resetUser: () => {},\r\n};\r\n\r\nexport const initialSession =\r\n  window && window.sessionStorage.getItem(\"auth\")\r\n    ? JSON.parse(window.sessionStorage.getItem(\"auth\"))\r\n    : defaultSession;\r\n\r\nexport const SessionContext = React.createContext(initialSession);\r\n\r\nconst SessionStore = ({ children }) => {\r\n  const { push } = useHistory();\r\n  const [session, setSessionData] = useState(initialSession);\r\n\r\n  let timer;\r\n\r\n  const autoLogout = () => {\r\n    const { expiresAt } = session;\r\n\r\n    if (expiresAt) {\r\n      const duration = new Date(expiresAt) - new Date().getTime();\r\n\r\n      timer = setTimeout(() => {\r\n        resetSession();\r\n        push(\"/\");\r\n      }, duration);\r\n    }\r\n  };\r\n\r\n  const setSession = (session) => {\r\n    setSessionData(session);\r\n    window.sessionStorage.setItem(\"auth\", JSON.stringify(session));\r\n  };\r\n\r\n  const resetSession = () => {\r\n    setSessionData(defaultSession);\r\n    window.sessionStorage.removeItem(\"auth\");\r\n    clearTimeout(timer);\r\n  };\r\n\r\n  useEffect(() => {\r\n    autoLogout();\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [session]);\r\n\r\n  return (\r\n    <SessionContext.Provider value={{ session, setSession, resetSession }}>\r\n      {children}\r\n    </SessionContext.Provider>\r\n  );\r\n};\r\n\r\nexport default SessionStore;\r\n","C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\pages\\ErrorPage.js",[],"C:\\Workspace\\FirebaseWithReactAddingAuthentication\\react-with-firebase-authentication\\src\\components\\Error\\index.js",[],{"ruleId":"73","replacedBy":"74"},{"ruleId":"75","replacedBy":"76"},{"ruleId":"77","severity":1,"message":"78","line":44,"column":6,"nodeType":"79","endLine":44,"endColumn":8,"suggestions":"80"},{"ruleId":"77","severity":1,"message":"81","line":58,"column":6,"nodeType":"79","endLine":58,"endColumn":15,"suggestions":"82"},"no-native-reassign",["83"],"no-negated-in-lhs",["84"],"react-hooks/exhaustive-deps","React Hook useCallback has a missing dependency: 'idToken'. Either include it or remove the dependency array.","ArrayExpression",["85"],"React Hook useEffect has missing dependencies: 'autoLogout' and 'timer'. Either include them or remove the dependency array.",["86"],"no-global-assign","no-unsafe-negation",{"desc":"87","fix":"88"},{"desc":"89","fix":"90"},"Update the dependencies array to be: [idToken]",{"range":"91","text":"92"},"Update the dependencies array to be: [autoLogout, session, timer]",{"range":"93","text":"94"},[1276,1278],"[idToken]",[1364,1373],"[autoLogout, session, timer]"]